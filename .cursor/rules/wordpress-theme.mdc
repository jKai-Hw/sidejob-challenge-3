---
description: WordPressクラシックテーマ開発ルール
globs: 
  - "wp-theme/**/*.php"
  - "wp-theme/**/*.scss"
  - "wp-theme/style.css"
alwaysApply: false
---

# WordPressクラシックテーマ開発ガイドライン

> このファイルはテンプレートです。実際の案件では必要に応じてカスタマイズしてください。

## 基本方針
- **クラシックテーマ**（.php）で開発
- Figmaデザインに忠実に実装しつつ、WordPressのベストプラクティスに従う
- アクセシビリティ（WCAG 2.1 AA準拠）を意識
- **SCSS** を使用してスタイリング（npm run watch:css で自動コンパイル）
- **jQuery** の使用OK（WordPress同梱版）

## ディレクトリ構造
\`\`\`
wp-theme/
├── assets/
│   ├── scss/
│   │   ├── _variables.scss      # カラー、フォント、スペーシング変数
│   │   ├── _mixins.scss         # ミックスイン（メディアクエリ等）
│   │   ├── _reset.scss          # リセットCSS
│   │   ├── _base.scss           # ベーススタイル
│   │   ├── _typography.scss     # タイポグラフィ
│   │   ├── components/          # 共通コンポーネント
│   │   │   ├── _button.scss
│   │   │   ├── _card.scss
│   │   │   └── _navigation.scss
│   │   ├── sections/            # セクション別スタイル
│   │   │   ├── _header.scss
│   │   │   ├── _footer.scss
│   │   │   └── _hero.scss
│   │   └── style.scss           # メインファイル（@use で読み込み）
│   ├── css/
│   │   └── style.css            # npm run build:css で生成
│   ├── js/
│   │   ├── main.js              # メインスクリプト（jQuery使用）
│   │   ├── slider.js            # スライダー用
│   │   └── filter.js            # 絞り込み検索用
│   └── images/
├── inc/                         # 機能ファイル
│   ├── custom-post-types.php
│   ├── custom-taxonomies.php
│   └── acf-fields.php
├── template-parts/              # 再利用可能なパーツ
│   ├── card-service.php
│   ├── card-news.php
│   └── section-cta.php
├── header.php                   # サイトヘッダー
├── footer.php                   # サイトフッター
├── front-page.php               # トップページ
├── page.php                     # 汎用固定ページ
├── page-about.php               # 会社概要（固定ページテンプレート）
├── page-contact.php             # お問い合わせ（固定ページテンプレート）
├── archive-service.php          # サービス一覧（CPTアーカイブ）
├── single-service.php           # サービス詳細（CPT個別）
├── archive.php                  # 汎用アーカイブ（ニュース等）
├── single.php                   # 汎用投稿詳細
├── 404.php                      # 404エラーページ
├── index.php                    # フォールバック（必須）
├── functions.php                # テーマ機能
├── style.css                    # テーマ情報（必須）
└── screenshot.png               # テーマサムネイル
\`\`\`

## SCSS設計ルール

### 変数命名規則（_variables.scss）
\`\`\`scss
// カラー
\$color-primary: #3B82F6;
\$color-secondary: #10B981;
\$color-text: #1F2937;
\$color-background: #FFFFFF;

// フォント
\$font-family-base: 'Noto Sans JP', sans-serif;
\$font-family-heading: 'Noto Sans JP', sans-serif;

// フォントサイズ
\$font-size-sm: 0.875rem;
\$font-size-base: 1rem;
\$font-size-lg: 1.25rem;
\$font-size-xl: 1.5rem;
\$font-size-2xl: 2rem;

// スペーシング
\$spacing-xs: 0.5rem;
\$spacing-sm: 1rem;
\$spacing-md: 1.5rem;
\$spacing-lg: 2rem;
\$spacing-xl: 3rem;

// ブレークポイント
\$breakpoint-sm: 640px;
\$breakpoint-md: 768px;
\$breakpoint-lg: 1024px;
\$breakpoint-xl: 1280px;
\`\`\`

### ミックスイン（_mixins.scss）
\`\`\`scss
// メディアクエリ
@mixin sp {
  @media (max-width: #{\$breakpoint-md - 1px}) {
    @content;
  }
}

@mixin tablet {
  @media (min-width: \$breakpoint-md) and (max-width: #{\$breakpoint-lg - 1px}) {
    @content;
  }
}

@mixin pc {
  @media (min-width: \$breakpoint-lg) {
    @content;
  }
}

// よく使うスタイル
@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}
\`\`\`

## テンプレート階層（クラシックテーマ）

### よく使うテンプレート
| テンプレート | 用途 |
|-------------|------|
| \`front-page.php\` | トップページ |
| \`page.php\` | 汎用固定ページ |
| \`page-{slug}.php\` | 特定のスラッグの固定ページ |
| \`single.php\` | 投稿詳細 |
| \`single-{post_type}.php\` | CPT詳細（例: single-service.php） |
| \`archive.php\` | 汎用アーカイブ |
| \`archive-{post_type}.php\` | CPTアーカイブ |
| \`index.php\` | フォールバック |

### テンプレートパーツの呼び出し
\`\`\`php
<?php get_header(); ?>        // header.php を読み込み
<?php get_footer(); ?>        // footer.php を読み込み
<?php get_sidebar(); ?>       // sidebar.php を読み込み
<?php get_template_part( 'template-parts/card', 'service' ); ?>  // template-parts/card-service.php
\`\`\`

## コーディング規約
- PHPはWordPress Coding Standardsに準拠
- SCSSはBEM記法を推奨（\`.block__element--modifier\`）
- インデントはスペース2つ
- PHPショートタグは使用しない（\`<?php\` を使用）
- 出力時は必ずエスケープ（esc_html, esc_url, esc_attr）

## テンプレートの基本構造

### header.php
\`\`\`php
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
  <meta charset="<?php bloginfo( 'charset' ); ?>">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <?php wp_head(); ?>
</head>
<body <?php body_class(); ?>>
<?php wp_body_open(); ?>

<header class="site-header">
  <!-- ヘッダーコンテンツ -->
</header>
\`\`\`

### footer.php
\`\`\`php
<footer class="site-footer">
  <!-- フッターコンテンツ -->
</footer>

<?php wp_footer(); ?>
</body>
</html>
\`\`\`

### ページテンプレート例（front-page.php）
\`\`\`php
<?php get_header(); ?>

<main class="site-main">
  <!-- メインコンテンツ -->
  <?php get_template_part( 'template-parts/section', 'hero' ); ?>
  <?php get_template_part( 'template-parts/section', 'about' ); ?>
  <?php get_template_part( 'template-parts/section', 'services' ); ?>
</main>

<?php get_footer(); ?>
\`\`\`

## Figmaからの実装時の注意点
- FigmaのAuto Layoutは Flexbox/Grid に変換
- Figmaのカラースタイルは SCSS変数に定義
- Figmaのテキストスタイルは SCSS変数に定義
- 画像は適切なサイズでエクスポートし、WebP形式を優先

## レスポンシブ対応
- モバイルファースト設計
- ブレークポイント:
  - sm: 640px
  - md: 768px（タブレット）
  - lg: 1024px（PC）
  - xl: 1280px（大画面）

## jQueryの使い方
- WordPress同梱のjQueryを使用（\`wp_enqueue_script\`）
- \`jQuery(document).ready()\` または \`jQuery(function(\$) { ... })\` で初期化
- 必要最小限の使用に留める

## 開発コマンド
\`\`\`bash
# 依存関係インストール
npm install

# SCSS監視モード（開発中はこれを起動）
npm run watch:css

# SCSSコンパイル（本番用・圧縮）
npm run build:css
\`\`\`
