---
description: WordPressãƒ†ãƒ¼ãƒé–‹ç™ºãƒ»CPTãƒ»ACFå®Ÿè£…ãƒ«ãƒ¼ãƒ«
globs: 
  - "wp-theme/**/*.php"
  - "wp-theme/**/*.scss"
alwaysApply: false
---

# WordPressé–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

## åŸºæœ¬æ–¹é‡

- **ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ†ãƒ¼ãƒ**ï¼ˆ.phpï¼‰ã§é–‹ç™º
- Figmaãƒ‡ã‚¶ã‚¤ãƒ³ã«å¿ å®Ÿã«å®Ÿè£…
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼ˆWCAG 2.1 AAæº–æ‹ ï¼‰ã‚’æ„è­˜
- **SCSS** ã§ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **jQuery** ä½¿ç”¨OKï¼ˆWordPressåŒæ¢±ç‰ˆï¼‰

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
wp-theme/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ scss/
â”‚   â”‚   â”œâ”€â”€ _variables.scss
â”‚   â”‚   â”œâ”€â”€ _mixins.scss
â”‚   â”‚   â”œâ”€â”€ _base.scss
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â””â”€â”€ style.scss
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ inc/
â”‚   â”œâ”€â”€ custom-post-types.php
â”‚   â””â”€â”€ custom-taxonomies.php
â”œâ”€â”€ template-parts/
â”œâ”€â”€ acf-json/
â”œâ”€â”€ header.php
â”œâ”€â”€ footer.php
â”œâ”€â”€ front-page.php
â”œâ”€â”€ page.php
â”œâ”€â”€ single.php
â”œâ”€â”€ archive.php
â”œâ”€â”€ 404.php
â”œâ”€â”€ index.php
â”œâ”€â”€ functions.php
â””â”€â”€ style.css
```

---

## ğŸ“„ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆéšå±¤

| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ç”¨é€” |
|-------------|------|
| `front-page.php` | ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ |
| `page.php` | æ±ç”¨å›ºå®šãƒšãƒ¼ã‚¸ |
| `page-{slug}.php` | ç‰¹å®šã‚¹ãƒ©ãƒƒã‚°ã®å›ºå®šãƒšãƒ¼ã‚¸ |
| `single.php` | æŠ•ç¨¿è©³ç´° |
| `single-{post_type}.php` | CPTè©³ç´° |
| `archive.php` | æ±ç”¨ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– |
| `archive-{post_type}.php` | CPTã‚¢ãƒ¼ã‚«ã‚¤ãƒ– |

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ„ã®å‘¼ã³å‡ºã—
```php
<?php get_header(); ?>
<?php get_footer(); ?>
<?php get_template_part( 'template-parts/card', 'service' ); ?>
```

---

## ğŸ“¦ ã‚«ã‚¹ã‚¿ãƒ æŠ•ç¨¿ã‚¿ã‚¤ãƒ—ï¼ˆCPTï¼‰

### ç™»éŒ²ä¾‹ï¼ˆinc/custom-post-types.phpï¼‰
```php
function theme_register_service_post_type() {
  $labels = array(
    'name'          => 'ã‚µãƒ¼ãƒ“ã‚¹',
    'singular_name' => 'ã‚µãƒ¼ãƒ“ã‚¹',
    'menu_name'     => 'ã‚µãƒ¼ãƒ“ã‚¹',
    'add_new'       => 'æ–°è¦è¿½åŠ ',
  );

  $args = array(
    'labels'        => $labels,
    'public'        => true,
    'show_in_rest'  => true,  // ãƒ–ãƒ­ãƒƒã‚¯ã‚¨ãƒ‡ã‚£ã‚¿å¯¾å¿œ
    'rewrite'       => array( 'slug' => 'service' ),
    'has_archive'   => true,
    'menu_icon'     => 'dashicons-portfolio',
    'supports'      => array( 'title', 'editor', 'thumbnail', 'excerpt' ),
  );

  register_post_type( 'service', $args );
}
add_action( 'init', 'theme_register_service_post_type' );
```

### ã‚¿ã‚¯ã‚½ãƒãƒŸãƒ¼ç™»éŒ²ä¾‹
```php
function theme_register_service_category() {
  register_taxonomy( 'service_category', array( 'service' ), array(
    'labels'       => array( 'name' => 'ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ†ã‚´ãƒªãƒ¼' ),
    'hierarchical' => true,
    'public'       => true,
    'show_in_rest' => true,
  ) );
}
add_action( 'init', 'theme_register_service_category' );
```

---

## ğŸ”§ ACFï¼ˆAdvanced Custom Fieldsï¼‰

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å–å¾—ã®åŸºæœ¬
```php
// å˜ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
$headline = get_field( 'hero_headline' );
$image = get_field( 'hero_image' );

// ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
if ( have_rows( 'features' ) ) :
  while ( have_rows( 'features' ) ) : the_row();
    $title = get_sub_field( 'feature_title' );
    ?>
    <div class="feature">
      <h3><?php echo esc_html( $title ); ?></h3>
    </div>
    <?php
  endwhile;
endif;

// ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒšãƒ¼ã‚¸ã‹ã‚‰å–å¾—
$phone = get_field( 'phone_number', 'option' );
```

### ã‚ˆãä½¿ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¿ã‚¤ãƒ—
| ã‚¿ã‚¤ãƒ— | ç”¨é€” |
|--------|------|
| ãƒ†ã‚­ã‚¹ãƒˆ | ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ |
| ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ | èª¬æ˜æ–‡ |
| ç”»åƒ | ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« |
| ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ | ç‰¹å¾´ãƒªã‚¹ãƒˆã€FAQ |
| ãƒªãƒ³ã‚¯ | CTAãƒœã‚¿ãƒ³ |

---

## ğŸ  å‹•çš„è¦ç´ 

### ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆSwiper.jsï¼‰
```javascript
// assets/js/slider.js
document.addEventListener('DOMContentLoaded', function() {
  new Swiper('.js-hero-slider', {
    loop: true,
    autoplay: { delay: 5000 },
    pagination: { el: '.swiper-pagination', clickable: true },
  });
});
```

### Ajaxçµã‚Šè¾¼ã¿
```php
// functions.php
function theme_filter_posts() {
  check_ajax_referer( 'theme_filter_nonce', 'nonce' );
  $category = sanitize_text_field( $_POST['category'] );
  
  $query = new WP_Query( array(
    'post_type' => 'service',
    'tax_query' => array(
      array(
        'taxonomy' => 'service_category',
        'field'    => 'slug',
        'terms'    => $category,
      ),
    ),
  ) );

  while ( $query->have_posts() ) : $query->the_post();
    get_template_part( 'template-parts/card', 'service' );
  endwhile;
  
  wp_die();
}
add_action( 'wp_ajax_filter_posts', 'theme_filter_posts' );
add_action( 'wp_ajax_nopriv_filter_posts', 'theme_filter_posts' );
```

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å¿…é ˆã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†
```php
// ãƒ†ã‚­ã‚¹ãƒˆ
echo esc_html( $text );

// URL
echo esc_url( $url );

// å±æ€§å€¤
echo esc_attr( $attr );

// HTMLè¨±å¯
echo wp_kses_post( $html );
```

### å…¥åŠ›ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º
```php
$page = sanitize_text_field( $_GET['page'] );
$email = sanitize_email( $_POST['email'] );
```

---

## ğŸ“‹ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### CPTå®Ÿè£…æ™‚
- [ ] `show_in_rest` ã‚’ true ã«è¨­å®š
- [ ] ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯è¨­å®šã‚’å†ä¿å­˜

### ACFå®Ÿè£…æ™‚
- [ ] ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯è‹±èªã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹
- [ ] å‡ºåŠ›æ™‚ã«é©åˆ‡ãªã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
- [ ] ç©ºå€¤ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã„ã‚‹

### å‹•çš„è¦ç´ å®Ÿè£…æ™‚
- [ ] JSã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã„
- [ ] SP/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/PCã§å‹•ä½œç¢ºèª
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®è¡¨ç¤º
