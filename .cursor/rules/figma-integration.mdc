---
description: Figma MCP連携ルール
globs: "**/*"
alwaysApply: true
---

# Figma MCP連携

## ⛔ 最重要ルール

```
絶対にFigmaの「ファイル全体」や「ページ全体」を一気に読み込まない
```

**理由:** トークン爆発、精度低下、コスト増大

## ✅ 正しいアプローチ

```
❌ NG: 「このFigmaファイル全体を見て」
❌ NG: 「このページ全体を読み込んで」

✅ OK: 「Node ID: xxx のデータを取得して」
✅ OK: 「このセクション（Node ID: yyy）を実装して」
```

## 📍 Node ID 取得方法

1. Figmaで対象フレームを選択
2. 右クリック → 「リンクをコピー」
3. URLの `node-id=XXX-XXX` がNode ID

## 🔄 実装フロー

```
【Phase 1】スタイルガイドのNode ID → _variables.scss 生成
【Phase 2】各セクションのNode ID → PHP + SCSS 作成
【Phase 3】ACF動的化
```

## 📋 プロンプトテンプレート

詳細は `docs/PROMPTS.md` を参照。

## ⚠️ データ品質の判断

### 良いデータ ✅
- Auto Layout使用（layoutMode あり）
- 意味のあるレイヤー名

### 悪いデータ ⚠️
- 絶対座標のみ（x, y だけ）
- 「Rectangle 1」「Group 2」など意味不明な名前

→ 悪いデータの場合：座標は無視、視覚的配置からFlexbox/Gridを推論

## 🖼️ 画像について

MCPは画像をダウンロードできない。
→ プレースホルダー使用 or Figmaから手動書き出し
