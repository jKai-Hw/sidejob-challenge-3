@use '../variables' as *;
@use '../mixins' as *;

/* ==========================================================================
   FAQ Section
   ========================================================================== */
.faq {
  padding: $spacing-3xl 0;
  background-color: $color-bg; // Using light bg to make white cards pop

  &__inner {
    @include container;
    max-width: 1000px; // Limit width for readability as per design
    padding: 0 $spacing-md; // SP padding
  }

  &__title {
    text-align: center;
    margin-bottom: $spacing-xl; // SP: Smaller margin
    
    // FIGMA: 40px Bold
    font-size: 32px;
    font-weight: $font-weight-bold;
    color: $color-dark;
    letter-spacing: 0.1em;

    @include mq($breakpoint-md) {
      font-size: 40px;
      margin-bottom: $spacing-2xl;
    }
  }

  &__list {
    display: flex;
    flex-direction: column;
    gap: $spacing-md; // SP: Smaller gap

    @include mq($breakpoint-md) {
      gap: $spacing-lg;
    }
  }

  /* FAQ Item Card */
  &__item {
    background-color: $color-white;
    border: 2px solid #93C572; // FIGMA: Green border
    border-radius: 30px; // SP: Smaller radius
    overflow: hidden;
    transition: all $transition-base;

    @include mq($breakpoint-md) {
      border-radius: 50px; // PC: Larger radius
    }

    // &.is-open {
    //   // Optional: Change style when open if needed
    // }
  }

  /* Question Block */
  &__question {
    width: 100%;
    display: flex;
    align-items: center; // Center vertically
    padding: $spacing-md $spacing-md; // SP: Smaller padding
    background: none;
    border: none;
    cursor: pointer;
    text-align: left;
    position: relative;
    min-height: 60px; // SP: Smaller min-height
    touch-action: manipulation; // Better touch handling

    @include mq($breakpoint-md) {
      padding: $spacing-md $spacing-xl;
      min-height: 70px; // PC: FIGMA: 70px height for closed state
    }

    @include mq($breakpoint-lg) {
      padding: $spacing-md $spacing-2xl;
    }
  }

  &__label-q {
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 28px; // SP: Smaller
    color: #93C572; // FIGMA: Green
    margin-right: $spacing-sm; // SP: Smaller margin
    line-height: 1;
    flex-shrink: 0;

    @include mq($breakpoint-md) {
      font-size: 35px; // PC: FIGMA: 35px
      margin-right: $spacing-md;
    }
  }

  &__question-text {
    font-size: 14px; // SP: Smaller
    font-weight: $font-weight-bold;
    color: #555555;
    flex-grow: 1;
    padding-right: $spacing-md; // SP: Smaller padding
    line-height: 1.5; // SP: Better readability

    @include mq($breakpoint-md) {
      font-size: 16px;
      padding-right: $spacing-lg; // Space for icon
    }

    @include mq($breakpoint-lg) {
      font-size: 20px; // FIGMA: 20px
    }
  }

  /* Toggle Icon (+ / -) */
  &__icon {
    width: 18px; // SP: Smaller
    height: 18px;
    position: relative;
    flex-shrink: 0;

    @include mq($breakpoint-md) {
      width: 20px;
      height: 20px;
    }

    &::before,
    &::after {
      content: '';
      position: absolute;
      background-color: #93C572; // FIGMA: Green icon
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: transform $transition-base;
    }

    // Horizontal line
    &::before {
      width: 100%;
      height: 2px;
    }

    // Vertical line (rotates to make + or -)
    &::after {
      width: 2px;
      height: 100%;
    }
  }

  // Open state icon transformation
  &__item.is-open &__icon::after {
    transform: translate(-50%, -50%) rotate(90deg); // Rotates to match horizontal, effectively disappearing into it? 
    // Wait, typically + becomes - by rotating vertical line 90deg or fading it out.
    // Or rotating the whole icon 45deg to make x.
    // FIGMA image shows a simple horizontal line (minus) for open state.
    // So we want vertical line to disappear or rotate.
    // Let's rotate the vertical line 90deg so it overlaps the horizontal line.
    transform: translate(-50%, -50%) rotate(90deg);
  }


  /* Answer Block */
  &__answer {
    display: none; // Hidden by default
    border-top: 1px solid $color-border; // Optional separator
    // Figma doesn't show a separator line, but spacing.
    // The border radius makes it tricky if we rely on overflow:hidden.
    border-top: none; 
    
    &[aria-hidden="false"] {
      display: block;
    }
  }

  &__answer-inner {
    padding: 0 $spacing-md $spacing-md; // SP: Smaller padding
    display: flex;
    align-items: flex-start;

    @include mq($breakpoint-md) {
      padding: 0 $spacing-xl $spacing-xl; // Bottom and side padding
    }

    @include mq($breakpoint-lg) {
      padding: 0 $spacing-2xl $spacing-xl;
    }
  }

  &__label-a {
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 28px; // SP: Smaller
    color: #F7B560; // FIGMA: Orange
    margin-right: $spacing-sm; // SP: Smaller margin
    line-height: 1;
    flex-shrink: 0;

    @include mq($breakpoint-md) {
      font-size: 35px; // PC: FIGMA: 35px
      margin-right: $spacing-md;
    }
  }

  &__answer-text {
    font-size: 14px; // SP: Smaller
    font-weight: $font-weight-medium; // FIGMA: Medium
    color: #555555;
    line-height: 1.6; // SP: Better readability
    margin-top: 4px; // SP: Smaller margin

    @include mq($breakpoint-md) {
      font-size: 16px;
      margin-top: 8px; // Align visually with A label
    }

    @include mq($breakpoint-lg) {
      font-size: 20px; // FIGMA: 20px
    }
  }
}
