@use '../variables' as *;
@use '../mixins' as *;

/* ==========================================================================
   Works Section
   ========================================================================== */
.works {
  padding: $spacing-3xl 0;
  background-color: transparent; // Let body/wrapper bg show through
  position: relative;

  &__inner {
    @include container;
    padding: 0 $spacing-md; // Ensure some side padding on mobile
  }

  /* Card Container */
  &__card {
    background-color: $color-white;
    border-radius: 0 100px 0 100px; // PC: FIGMA: rectangleCornerRadii: [0, 100, 0, 100]
    box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.16); // FIGMA: Drop Shadow
    padding: $spacing-2xl 0 $spacing-lg; // Adjust padding as needed
    overflow: hidden; // Clip content to border-radius
    margin-bottom: $spacing-xl;

    @include mq-max($breakpoint-md) {
      border-radius: 30px; // SP: More rounded
      padding: $spacing-lg $spacing-md $spacing-md;
    }
  }

  &__title {
    margin-bottom: $spacing-xl;
    font-size: 32px; // SP
    font-weight: $font-weight-bold;
    letter-spacing: 0.1em;
    text-align: left; // SP: Left aligned
    color: $color-text;
    padding: 0 $spacing-md; // SP padding

    @include mq($breakpoint-md) {
      font-size: 40px;
      text-align: center;
      padding: 0 $spacing-2xl;
    }
  }

  /* Tabs */
  &__tabs {
    display: flex;
    justify-content: flex-start; // SP: Left align
    gap: $spacing-sm; // SP: Smaller gap
    margin-bottom: $spacing-xl;
    flex-wrap: wrap;
    padding: 0 $spacing-md; // SP padding
    overflow-x: auto; // Allow horizontal scroll if needed
    -webkit-overflow-scrolling: touch;

    @include mq($breakpoint-md) {
      justify-content: center;
      gap: $spacing-md;
      padding: 0 $spacing-lg;
    }

    @include mq($breakpoint-lg) {
      justify-content: flex-start;
      padding-left: $spacing-2xl;
    }
  }

  &__tab {
    width: 140px; // SP: Smaller
    height: 48px; // SP: Smaller
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0; // Prevent shrinking
    
    border-radius: 20px; // FIGMA: 20px radius
    background-color: $color-white;
    color: #F7B560; // FIGMA: Gold/Orange text
    font-size: 16px; // SP: Smaller
    font-weight: $font-weight-bold;
    cursor: pointer;
    transition: all $transition-base;
    box-shadow: 0 3px 6px rgba(0,0,0,0.16); // FIGMA shadow
    border: none;

    &:hover {
      transform: translateY(-2px);
    }

    &.is-active {
      background-color: #93C572; // FIGMA: Green active bg
      color: $color-white;
      box-shadow: none; // Often shadows are removed or changed on active state
    }

    @include mq($breakpoint-md) {
      width: 160px;
      height: 50px;
      font-size: 18px;
    }

    @include mq($breakpoint-lg) {
      width: 190px;
      height: 65px;
      font-size: 20px;
    }
  }

  /* Content Area */
  &__content {
    max-width: 100%;
    margin-bottom: $spacing-xl; // SP: Smaller margin
    padding: 0 $spacing-md; // SP padding

    @include mq($breakpoint-md) {
      margin-bottom: $spacing-2xl;
      padding: 0 $spacing-lg;
    }

    @include mq($breakpoint-lg) {
      padding-left: $spacing-2xl;
    }
  }

  &__text {
    font-size: 14px; // SP: Smaller
    line-height: 1.8; // SP: More readable
    color: #555555; // FIGMA: #555555
    font-weight: $font-weight-medium; // FIGMA: Medium
    text-align: left;
    
    // Fade animation for text change
    transition: opacity $transition-base;
    &.is-hidden {
      opacity: 0;
    }

    @include mq($breakpoint-md) {
      font-size: 16px;
      line-height: 24px;
    }
  }

  /* Slider (Marquee) */
  &__slider-wrapper {
    width: 100%;
    overflow: hidden;
    padding-bottom: $spacing-lg;
    margin-top: $spacing-lg; // SP: Smaller margin

    @include mq($breakpoint-md) {
      margin-top: $spacing-xl;
    }
  }

  &__slider {
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    display: flex;
  }

  &__slider-track {
    display: flex;
    gap: $spacing-sm; // SP: Smaller gap
    animation: marquee 40s linear infinite;
    padding-left: $spacing-md;

    &:hover {
      animation-play-state: paused;
    }

    @include mq($breakpoint-md) {
      gap: $spacing-md;
    }
  }

  &__slider-item {
    flex: 0 0 auto;
    width: 200px; // SP: Smaller
    height: 150px; // SP: Smaller
    border-radius: 20px; // FIGMA: 20px radius
    overflow: hidden;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform $transition-base;

      &:hover {
        transform: scale(1.05);
      }
    }

    @include mq($breakpoint-md) {
      width: 250px;
      height: 180px;
    }

    @include mq($breakpoint-lg) {
      width: 300px;
      height: 250px; // FIGMA: 300x250
    }
  }
}

@keyframes marquee {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}
